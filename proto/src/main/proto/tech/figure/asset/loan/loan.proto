syntax = "proto3";

package tech.figure.asset.loan;

import "tech/figure/asset/loan/consent.proto";
import "tech/figure/asset/loan/funding.proto";
import "tech/figure/finance/financial_account.proto";
import "tech/figure/util/util.proto";
import "google/protobuf/timestamp.proto";

/*
  IMPORTANT: The data in this proto should come ONLY from the originator.
  Data generated by smart contracts, marketplace, servicing, or any other app
  needs to go into separate Facts in the loan Scope.
*/
message Loan {

  // Identifiers/Meta
  Meta meta = 1;

  // Loan terms: amount, duration, rates
  Terms terms = 2;

  // Date the Note is signed
  tech.figure.util.Date closing_date = 310;

  // Instructions on how to fund loan/where to send money
  repeated FundingInstruction funding_instructions = 501;

  // Loan options to which borrower has/has not consented
  repeated Consent consents = 740;




  repeated asset.RateDiscount rate_discount = 770; // All rate discounts available to this asset.


  repeated tech.figure.util.Note additional_info = 998;
  tech.figure.util.AuditFields audit_fields = 999;

}

message Meta {
  tech.figure.util.UUID uuid = 1 ;  // Loan id
  string loan_number = 2 ;          // Originator's internal loan identifier
  string loan_type = 3 ;            // Loan Type (Mortgage, HELOC, Personal Loan, etc.)
  string loan_purpose = 4 ;         // Borrower's intended purpose for loan
  string originator_name = 5;       // Human-readable name of the originating firm
}

message Terms {
  tech.figure.util.UUID uuid = 1;  // Id for this set of terms/offer
  tech.figure.util.Money principal_amount = 2; // Loan amount, not including fees or interest
  tech.figure.util.Money total_amount = 3; // Principal loan amount + origination fees
  int32 term_in_months = 4;



  int32 offer_index = 10;
  string pay_type = 13;
  string rate_type = 14;
  tech.figure.util.Decimal prime_rate = 15;
  tech.figure.util.Decimal int_rate = 16;
  tech.figure.util.Decimal margin = 17;
  string orig_fee_type = 23;
  tech.figure.util.Decimal origination_fee_rate = 18;
  tech.figure.util.Decimal rate_cap = 20;
  tech.figure.util.Decimal base_pricing_rate = 21;
  tech.figure.util.Decimal other_pricing_rate = 22;
  tech.figure.util.Decimal index_rate = 25;
  string index_rate_type = 26;
}

message PaymentDetails {
  tech.figure.util.Money monthly_payment_amount = 215; // Principal and interest only (no escrow/fees)
  tech.figure.util.Date first_payment_date = 315;
  tech.figure.util.Date grace_period_end_date = 320;
  tech.figure.util.Date amort_start_date = 325 ;
  tech.figure.finance.FinancialAccount autopay_account = 505 ; // - if borrower has agreed to automated monthly payments

}






//message TriMergeReport {
//  int32 calculated_credit_score = 1;
//  google.protobuf.Timestamp report_time = 2;
//  repeated CreditReport reports = 3;
//  tech.figure.util.UUID party_uuid = 4;
//}
//
//message Recording {
//  tech.figure.util.UUID recorded_document_uuid = 1;
//  string recording_status = 10 ;
//  google.protobuf.Timestamp recorded_timestamp = 11;
//  string instrument_number = 12 ;
//  tech.figure.util.Date security_instrument_date = 13;
//  tech.figure.util.Date county_recorded_date = 14;
//  string document_number = 15;
//  string book = 16;
//  string page = 17;
//  string county_recorded = 18;
//  string town_recorded = 19;
//  string state_recorded = 20;
//  string recordation_number = 21;
//  tech.figure.util.AuditFields audit_fields = 99;
//}
//
//
//message HomeOwnersAssociation {
//  bool escrow_flag = 1; // Indication whether loan is escrowed for HOA dues
//  string reference_number = 3;
//  tech.figure.util.Money escrow_monthly_amount = 6; // If escrow flag is set, this sets witholding for escrow from monthly payment
//  EscrowWithdrawPolicy withdraw_policy = 7;
//
//  ContactInformation contact_info = 15 ;
//}
//
//message Insurance {
//  string insurance_type = 1; // see ExpectedEnumValues.kt - InsuranceType
//  bool escrow_flag = 2; // Indication whether loan is escrowed for this type of insurance
//  tech.figure.util.Money coverage_amount = 3;
//  tech.figure.util.Date expiration_date = 4; // policy expiration date
//  string policy_number = 5;
//  tech.figure.util.Money escrow_monthly_amount = 9; // if escrow flag is set, this sets witholding for escrow from monthly payment
//  EscrowWithdrawPolicy withdraw_policy = 11;
//  tech.figure.util.Date start_date = 12; // policy start date
//
//  ContactInformation contact_info = 20;
//
//  reserved 'payment_amount', 'payment_frequency', 'company';
//  reserved 6, 7, 8;
//}
//
//message Diligence {
//  bool reserves_confirmed = 1;
//  bool income_verified = 2;
//}
//
//message TaxEscrow {
//  bool escrow_flag = 1; // Indication whether loan is escrowed for taxes
//  tech.figure.util.Money escrow_monthly_amount = 2; // if escrow flag is set, this sets witholding for escrow from monthly payment
//  string tax_type = 3; // see ExpectedEnumValues.kt - TaxEscrowType
//  EscrowWithdrawPolicy withdraw_policy = 4;
//  string tax_year = 5; // initial tax year
//
//  ContactInformation contact_info = 15;
//}
//
//message EscrowWithdrawPolicy {
//  tech.figure.util.Date first_withdraw_date = 1; // the initial withdraw date after funding
//  string withdraw_frequency = 3; // see ExpectedEnumValues.kt - PaymentFrequency
//  tech.figure.util.Money withdraw_amount = 2; // amount to be withdrawn at the given frequency
//}
//
//message LoanValidationDates {
//  tech.figure.util.Date initial_loan_estimate_delivery_date = 1;
//  tech.figure.util.Date final_loan_estimate_delivery_date = 2;
//  tech.figure.util.Date revised_loan_estimate_delivery_date = 3;
//  tech.figure.util.Date credit_disclosure_delivery_date = 4;
//  tech.figure.util.Date revised_credit_disclosure_delivery_date = 5;
//  tech.figure.util.Date change_in_circumstance_date = 6;
//  tech.figure.util.Date rescission_notice_delivery_date = 7;
//}
//






